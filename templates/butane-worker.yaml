variant: fcos
version: 1.4.0
ignition:
  config:
    merge:
      - source: WORKER_SOURCE_URL
        verification:
          hash: sha512-WORKER_SHA512
storage:
  files:
    - path: /etc/default/wesher
      mode: 0700
      user:
        id: 0
      group:
        id: 0
      contents:
        inline: |
          WESHER_INTERFACE="wgokd"
          WESHER_CLUSTER_KEY="WIREGUARD_CLUSTER_KEY"
          WESHER_JOIN="LOADBALANCER_SERVER_IP"
          WESHER_CLUSTER_PORT="7946"
          WESHER_WIREGUARD_PORT="51820"
          WESHER_OVERLAY_NET="10.0.0.0/16"
          WESHER_BIND_ADDR="$(curl -s http://169.254.169.254/hetzner/v1/metadata/public-ipv4)"